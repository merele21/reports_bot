# Telegram Bot –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è –æ—Ç—á–µ—Ç–æ–≤

–ë–æ—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –∫–æ–Ω—Ç—Ä–æ–ª—è —Å–¥–∞—á–∏ –æ—Ç—á–µ—Ç–æ–≤ —Å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º–∏ –≤ Telegram-–∫–∞–Ω–∞–ª–∞—Ö –∏ —Ç–æ–ø–∏–∫–∞—Ö.

## üéØ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫–∞–Ω–∞–ª–æ–≤/—Ç–æ–ø–∏–∫–æ–≤ —Å —Ä–∞–∑–Ω—ã–º–∏ –¥–µ–¥–ª–∞–π–Ω–∞–º–∏
- üì∏ –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ)
- üé® –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ç–æ –ø–æ —à–∞–±–ª–æ–Ω—É (perceptual hashing)
- üîë –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ –≤ –æ—Ç—á–µ—Ç–∞—Ö
- ‚è∞ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è (–æ–¥–Ω–æ–∫—Ä–∞—Ç–Ω–æ –≤ –æ–∫–Ω–µ +5 –º–∏–Ω—É—Ç –ø–æ—Å–ª–µ –¥–µ–¥–ª–∞–π–Ω–∞)
- üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —Å –æ—Ç–ø—Ä–∞–≤–∫–æ–π –≤ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —Ç—Ä–µ–¥—ã
- üîß –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
- üßµ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–æ–ø–∏–∫–æ–≤ (threads) –≤ —Å—É–ø–µ—Ä–≥—Ä—É–ø–ø–∞—Ö

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- Python 3.11+
- aiogram 3.x
- SQLAlchemy 2.0
- APScheduler
- PostgreSQL / SQLite
- Pillow + ImageHash (–¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —à–∞–±–ª–æ–Ω–æ–≤ —Ñ–æ—Ç–æ)
- Docker

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone <repository_url>
cd report_bot
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
cp .env.example .env
nano .env
```

–£–∫–∞–∂–∏—Ç–µ:

```env
BOT_TOKEN=your_bot_token_here
ADMIN_IDS=your_ids
DATABASE_URL=sqlite+aiosqlite:///./bot_data.db
TZ=Europe/Moscow
MIN_PHOTOS=1
STATS_DAY=0  # 0=Monday, 6=Sunday
STATS_HOUR=9
STATS_MINUTE=0
```

### 3. –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker

```bash
# –°–±–æ—Ä–∫–∞
docker-compose build

# –ó–∞–ø—É—Å–∫
docker-compose up -d

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker-compose logs -f bot
```

### 4. –ó–∞–ø—É—Å–∫ –±–µ–∑ Docker

```bash
python -m venv venv
source venv/bin/activate  # Linux/Mac
# –∏–ª–∏ venv\Scripts\activate  # Windows

pip install -r requirements.txt
python -m bot.main
```

### 5. –ú–∏–≥—Ä–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–ï—Å–ª–∏ –≤—ã –æ–±–Ω–æ–≤–ª—è–µ—Ç–µ –±–æ—Ç–∞ —Å –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏:

```bash
python migrate_db.py
```

## üìã –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

### –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã (–¥–æ—Å—Ç—É–ø–Ω—ã –≤—Å–µ–º)

- `/get_user_id` - –£–∑–Ω–∞—Ç—å —Å–≤–æ–π Telegram User ID
- `/get_chat_id` - –£–∑–Ω–∞—Ç—å Chat ID —Ç–µ–∫—É—â–µ–≥–æ —á–∞—Ç–∞
- `/get_thread_id` - –£–∑–Ω–∞—Ç—å Thread ID —Ç–µ–∫—É—â–µ–≥–æ —Ç–æ–ø–∏–∫–∞

### –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

- `/add_ch <–Ω–∞–∑–≤–∞–Ω–∏–µ> <HH:MM> <–∫–ª—é—á–µ–≤–æ–µ_—Å–ª–æ–≤–æ> [–º–∏–Ω_—Ñ–æ—Ç–æ]` - –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–∞–Ω–∞–ª/—Ç–æ–ø–∏–∫
- `/add_user` - –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Ç—Ä–µ–¥ (reply –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ)
- `/set_stats_destination` - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–µ—Å—Ç–æ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- `/add_template` - –î–æ–±–∞–≤–∏—Ç—å —à–∞–±–ª–æ–Ω —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ (—Å –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–Ω—ã–º —Ñ–æ—Ç–æ)
- `/list_channels` - –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ –∫–∞–Ω–∞–ª–æ–≤
- `/stats` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π –∑–∞ –Ω–µ–¥–µ–ª—é

## üöÄ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –®–∞–≥ 1: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ç–æ–ø–∏–∫–∞

–í –Ω—É–∂–Ω–æ–º —Ç–æ–ø–∏–∫–µ –Ω–∞–ø–∏—à–∏—Ç–µ:

```
/add_ch –æ—Ç—á–µ—Ç1 10:00 –æ—Ç—á–µ—Ç-—É—Ç—Ä–æ 2
```

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
- `–æ—Ç—á–µ—Ç1` - —Ç–∏–ø –æ—Ç—á–µ—Ç–∞
- `10:00` - –≤—Ä–µ–º—è –¥–µ–¥–ª–∞–π–Ω–∞ (–ø—Ä–æ–≤–µ—Ä–∫–∞ –≤ 10:05:00-10:05:59)
- `–æ—Ç—á–µ—Ç-—É—Ç—Ä–æ` - –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ
- `2` - –º–∏–Ω–∏–º—É–º —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–µ—Å—Ç–∞ –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ç–æ–ø–∏–∫, –∫—É–¥–∞ –Ω—É–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É:

```
/set_stats_destination
```

### –®–∞–≥ 3: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

–û—Ç–≤–µ—Ç—å—Ç–µ –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Ç–æ–ø–∏–∫–µ:

```
/add_user
```

‚ö†Ô∏è **–í–∞–∂–Ω–æ:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–∏–≤—è–∑—ã–≤–∞–µ—Ç—Å—è –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É —Ç–æ–ø–∏–∫—É. –ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –≤ —Ç–æ—Ç –∂–µ —Ç–æ–ø–∏–∫ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ –æ—à–∏–±–∫—É.

### –®–∞–≥ 4 (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ): –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞ —Ñ–æ—Ç–æ

–û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ñ–æ—Ç–æ-—à–∞–±–ª–æ–Ω —Å –∫–æ–º–∞–Ω–¥–æ–π:

```
/add_template –®–∞–±–ª–æ–Ω –¥–ª—è —É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –æ—Ç—á–µ—Ç–∞
```

–¢–µ–ø–µ—Ä—å –≤—Å–µ –æ—Ç—á–µ—Ç—ã –±—É–¥—É—Ç –ø—Ä–æ–≤–µ—Ä—è—Ç—å—Å—è –Ω–∞ –ø–æ—Ö–æ–∂–µ—Å—Ç—å —Å —ç—Ç–∏–º —Ñ–æ—Ç–æ.

## üîÑ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–æ—Ç

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–µ–¥–ª–∞–π–Ω–æ–≤

1. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–µ–¥–ª–∞–π–Ω–∞:** –í—ã —É–∫–∞–∑—ã–≤–∞–µ—Ç–µ `10:00`
2. **–û–∫–Ω–æ –ø—Ä–æ–≤–µ—Ä–∫–∏:** –ë–æ—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≤ `10:04:00 - 10:04:59`
3. **–û–¥–Ω–æ–∫—Ä–∞—Ç–Ω–æ–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ:** –ï—Å–ª–∏ –æ—Ç—á–µ—Ç –Ω–µ —Å–¥–∞–Ω, –±–æ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ **—Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑**
4. **–ó–∞–ø–∏—Å—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏:** –ü—Ä–æ–ø—É—Å–∫ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ –ë–î –¥–ª—è –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π

1. **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ:** –ú–∏–Ω–∏–º—É–º X —Ñ–æ—Ç–æ (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è)
2. **–ö–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ:** –í —Ç–µ–∫—Å—Ç–µ/–ø–æ–¥–ø–∏—Å–∏ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —É–∫–∞–∑–∞–Ω–Ω–æ–µ —Å–ª–æ–≤–æ
3. **–®–∞–±–ª–æ–Ω (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):**
   - MD5 —Ö–µ—à –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è
   - Perceptual hash –¥–ª—è –ø–æ—Ö–æ–∂–∏—Ö —Ñ–æ—Ç–æ (–¥–æ–ø—É—Å–∫ ‚â§10)

### –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

–ö–∞–∂–¥—ã–π –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ –≤ 09:00 (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `.env`):
- –ë–æ—Ç —Å–æ–±–∏—Ä–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∑–∞ –Ω–µ–¥–µ–ª—é
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–æ–ø-10 –ø–æ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è–º
- –í —Ç—Ä–µ–¥—ã, –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ `/set_stats_destination`

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
untitled/
‚îú‚îÄ‚îÄ bot/
‚îÇ   ‚îú‚îÄ‚îÄ main.py              # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îÇ   ‚îú‚îÄ‚îÄ config.py            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ handlers/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ admin.py         # –ê–¥–º–∏–Ω-–∫–æ–º–∞–Ω–¥—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ reports.py       # –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç—á–µ—Ç–æ–≤
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ stats.py         # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ database/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ models.py        # SQLAlchemy –º–æ–¥–µ–ª–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ engine.py        # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ crud.py          # CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ scheduler/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ tasks.py         # –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á
‚îÇ   ‚îú‚îÄ‚îÄ middlewares/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ database.py      # Middleware –¥–ª—è –ë–î
‚îÇ   ‚îî‚îÄ‚îÄ utils/
‚îÇ       ‚îî‚îÄ‚îÄ validators.py    # –í–∞–ª–∏–¥–∞—Ç–æ—Ä—ã
‚îú‚îÄ‚îÄ migrate_db.py            # –°–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ requirements.txt
‚îú‚îÄ‚îÄ Dockerfile
‚îú‚îÄ‚îÄ docker-compose.yml
‚îî‚îÄ‚îÄ .env.example
```

## üóÑ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü—ã

- `users` - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- `channels` - –ö–∞–Ω–∞–ª—ã/—Ç–æ–ø–∏–∫–∏ —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
- `user_channels` - –°–≤—è–∑—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –∫–∞–Ω–∞–ª–∞–º–∏ (–∫–æ–Ω—Ç—Ä–æ–ª—å —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏)
- `reports` - –û—Ç—á–µ—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `stats` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π
- `photo_templates` - –®–∞–±–ª–æ–Ω—ã —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

### –ö–ª—é—á–µ–≤—ã–µ –ø–æ–ª—è

**channels:**
- `telegram_id` + `thread_id` - —É–Ω–∏–∫–∞–ª—å–Ω–∞—è –ø–∞—Ä–∞ (–æ–¥–∏–Ω —á–∞—Ç, —Ä–∞–∑–Ω—ã–µ —Ç–æ–ø–∏–∫–∏)
- `stats_chat_id` + `stats_thread_id` - –∫—É–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É

**photo_templates:**
- `photo_hash` - MD5 –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è
- `perceptual_hash` - pHash –¥–ª—è –ø–æ—Ö–æ–∂–∏—Ö —Ñ–æ—Ç–æ

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

### PostgreSQL

1. –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —Å–µ–∫—Ü–∏—é `db` –≤ `docker-compose.yml`
2. –ò–∑–º–µ–Ω–∏—Ç–µ `.env`:

```env
DATABASE_URL=postgresql+asyncpg://botuser:strong_password@db:5432/report_bot
```

3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ:

```bash
docker-compose up -d
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

–í `.env`:

```env
STATS_DAY=0      # –ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫
STATS_HOUR=17    # 17:00
STATS_MINUTE=30  # 17:30
```

## üêõ –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

```bash
docker-compose logs -f bot
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ë–î (SQLite)

```bash
sqlite3 bot_data.db
.tables
.schema channels
SELECT * FROM channels;
```

### –¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

**–ë–æ—Ç –Ω–µ —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ –∫–æ–º–∞–Ω–¥—ã –≤ —Ç–æ–ø–∏–∫–µ:**
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–æ—Ç –∞–¥–º–∏–Ω –≤ –≥—Ä—É–ø–ø–µ
- –í–∫–ª—é—á–∏—Ç–µ "Topics" –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –≥—Ä—É–ø–ø—ã
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –±–æ—Ç–∞ –Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫—É —Å–æ–æ–±—â–µ–Ω–∏–π

**–®–∞–±–ª–æ–Ω—ã —Ñ–æ—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç:**
- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –ª–∏ `Pillow` –∏ `imagehash`? (`pip list | grep -i pillow`)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –æ—à–∏–±–∫–∏ –ø—Ä–∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏–∏ —Ñ–æ—Ç–æ

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –Ω–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç:**
- –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ –ª–∏ `/set_stats_destination`?
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –±–æ—Ç–∞ –≤ —Ç—Ä–µ–¥–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Ä–µ–º—è –≤ `.env` –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### Health check

–î–æ–±–∞–≤—å—Ç–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):

```python
# bot/main.py
from aiohttp import web

async def health(request):
    return web.Response(text="OK")

app = web.Application()
app.router.add_get("/health", health)
```

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ –•—Ä–∞–Ω–∏—Ç–µ `.env` –≤ `.gitignore`
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∏–ª—å–Ω—ã–µ –ø–∞—Ä–æ–ª–∏ –¥–ª—è PostgreSQL
- ‚úÖ –û–≥—Ä–∞–Ω–∏—á—å—Ç–µ `ADMIN_IDS` –¥–æ–≤–µ—Ä–µ–Ω–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- ‚úÖ –†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è


## ü§ù –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `docker-compose logs bot`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∑–∞–¥–∞–Ω—ã
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –±–æ—Ç–∞ –≤ –∫–∞–Ω–∞–ª–∞—Ö/—Ç–æ–ø–∏–∫–∞—Ö
4. –°–æ–∑–¥–∞–π—Ç–µ issue —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –ø—Ä–æ–±–ª–µ–º—ã –∏ –ª–æ–≥–∞–º–∏