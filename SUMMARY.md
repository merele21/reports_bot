# –°–≤–æ–¥–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–æ—Ç–∞ - –í–µ—Ä—Å–∏—è 2.0

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ

### 1. –°–æ–±—ã—Ç–∏–µ `/add_event_notext` ‚úì
**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è (–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ —Ñ–æ—Ç–æ) –æ—Ç –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ –∑–∞–¥–∞–Ω–Ω—ã–π –ø—Ä–æ–º–µ–∂—É—Ç–æ–∫ –≤—Ä–µ–º–µ–Ω–∏
- –§–∏–∫—Å–∏—Ä—É–µ—Ç 1 —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç 1 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –¥–µ–Ω—å
- –†–∞–±–æ—Ç–∞–µ—Ç —Å –ø–µ—Ä–µ—Å—ã–ª–∞–µ–º—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏

**–§–æ—Ä–º–∞—Ç:**
```
/add_event_notext [–Ω–∞—á–∞–ª–æ] [–∫–æ–Ω–µ—Ü]
–ü—Ä–∏–º–µ—Ä: /add_event_notext 09:00 18:00
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –°—Ç—Ä–æ–≥–∏–π deadline –±–µ–∑ –∑–∞–ø–∞—Å–Ω–æ–≥–æ —Ç–∞–π–º–µ—Ä–∞ (+5 –º–∏–Ω)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—ã—Ö–æ–¥–Ω—ã—Ö: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–∏—à–µ—Ç "–≤—ã—Ö–æ–¥–Ω–æ–π"
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—É–±–ª–∏–∫—É–µ—Ç—Å—è –≤ `[–∫–æ–Ω–µ—Ü]` —Å—Ç—Ä–æ–≥–æ –ø–æ –≤—Ä–µ–º–µ–Ω–∏

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
```
‚úÖ –°–¥–∞–ª–∏ –≤–æ–≤—Ä–µ–º—è:
- @username1
- @username2

‚ùå –ù–µ —Å–¥–∞–ª–∏:
- @username3

üèñ –í—ã—Ö–æ–¥–Ω–æ–π:
- @username4
```
*–ü—É—Å—Ç—ã–µ —Ä–∞–∑–¥–µ–ª—ã –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è*

---

### 2. –°–æ–±—ã—Ç–∏—è `/add_event_open` –∏ `/add_event_close` ‚úì
**–ß—Ç–æ –¥–µ–ª–∞—é—Ç:**
- –û—Ç—Å–ª–µ–∂–∏–≤–∞—é—Ç —Å–æ–æ–±—â–µ–Ω–∏—è —Å –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–æ–º –≤ –∑–∞–¥–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è
- –ö–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –≥–¥–µ —É–≥–æ–¥–Ω–æ –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ regex –≤–∞—Ä–∏–∞—Ü–∏–π (–¥–æ 5 —Å–∏–º–≤–æ–ª–æ–≤ –ø–æ—Å–ª–µ –±–∞–∑–æ–≤–æ–≥–æ —Å–ª–æ–≤–∞)

**–§–æ—Ä–º–∞—Ç:**
```
/add_event_open [–Ω–∞—á–∞–ª–æ] [–∫–æ–Ω–µ—Ü] "–∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ"
/add_event_close [–Ω–∞—á–∞–ª–æ] [–∫–æ–Ω–µ—Ü] "–∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ"

–ü—Ä–∏–º–µ—Ä—ã:
/add_event_open 09:00 18:00 "–æ—Ç–∫—Ä—ã—Ç"
/add_event_close 18:00 23:00 "–∑–∞–∫—Ä—ã—Ç"
```

**Regex –ø—Ä–∏–º–µ—Ä—ã:**
- "–æ—Ç–∫—Ä—ã—Ç" –Ω–∞–π–¥–µ—Ç: –æ—Ç–∫—Ä—ã—Ç, –æ—Ç–∫—Ä—ã—Ç–∞, –æ—Ç–∫—Ä—ã—Ç–æ, –æ—Ç–∫—Ä—ã—Ç–∏–µ, –æ—Ç–∫—Ä—ã—Ç–∞
- "–∑–∞–∫—Ä—ã—Ç" –Ω–∞–π–¥–µ—Ç: –∑–∞–∫—Ä—ã—Ç, –∑–∞–∫—Ä—ã—Ç–∞, –∑–∞–∫—Ä—ã—Ç–æ, –∑–∞–∫—Ä—ã—Ç–∏–µ, –∑–∞–∫—Ä—ã—Ç–∞

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
```
üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–ª—é—á–µ–≤–æ–º—É —Å–ª–æ–≤—É '–æ—Ç–∫—Ä—ã—Ç'

‚úÖ –°–¥–∞–ª–∏ –≤–æ–≤—Ä–µ–º—è:
- @username1

‚ùå –ù–µ —Å–¥–∞–ª–∏:
- @username2
```
*–ü—É—Å—Ç—ã–µ —Ä–∞–∑–¥–µ–ª—ã –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è*

---

### 3. –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ `/rm_event` ‚úì
**–ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å:**
- –¢–µ–ø–µ—Ä—å —É–¥–∞–ª—è–µ—Ç **–≤—Å–µ —Ç–∏–ø—ã —Å–æ–±—ã—Ç–∏–π**, –≤–∫–ª—é—á–∞—è:
  - –û–±—ã—á–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è (`/add_event`)
  - –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è (`/add_tmp_event`)
  - Checkout —Å–æ–±—ã—Ç–∏—è (`/add_event_checkout`)
  - **NoText —Å–æ–±—ã—Ç–∏—è** (`/add_event_notext`)
  - **Keyword —Å–æ–±—ã—Ç–∏—è** (`/add_event_open`, `/add_event_close`)

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```
/rm_event
# –ë–æ—Ç –ø–æ–∫–∞–∂–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Å–æ–±—ã—Ç–∏–π —Å –Ω–æ–º–µ—Ä–∞–º–∏
# –û—Ç–ø—Ä–∞–≤—å—Ç–µ –Ω–æ–º–µ—Ä —Å–æ–±—ã—Ç–∏—è –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è
```

---

### 4. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ checkout ‚úì
**–ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
- –í—Ä–µ–º—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏–∑–º–µ–Ω–µ–Ω–æ —Å **UTC** –Ω–∞ **UTC+3** (–ú–°–ö)
- –¢–µ–ø–µ—Ä—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –≤—Ä–µ–º—è —Å–¥–∞—á–∏ –æ—Ç—á–µ—Ç–æ–≤

---

## üìã –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ù–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã –≤ –ë–î:
1. `notext_events` - —Å–æ–±—ã—Ç–∏—è –±–µ–∑ —Ç–µ–∫—Å—Ç–∞
2. `notext_reports` - –æ—Ç—á–µ—Ç—ã –¥–ª—è notext —Å–æ–±—ã—Ç–∏–π
3. `notext_day_offs` - –≤—ã—Ö–æ–¥–Ω—ã–µ –¥–Ω–∏
4. `keyword_events` - —Å–æ–±—ã—Ç–∏—è —Å –∫–ª—é—á–µ–≤—ã–º–∏ —Å–ª–æ–≤–∞–º–∏
5. `keyword_reports` - –æ—Ç—á–µ—Ç—ã –¥–ª—è keyword —Å–æ–±—ã—Ç–∏–π

### –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
1. `bot/database/models.py` - –Ω–æ–≤—ã–µ –º–æ–¥–µ–ª–∏
2. `bot/database/crud.py` - CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏
3. `bot/handlers/admin.py` - –Ω–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã
4. `bot/handlers/reports.py` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π
5. `bot/scheduler/tasks.py` - –ø—É–±–ª–∏–∫–∞—Ü–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
6. `migrate_db.py` - —Å–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∞—Ü–∏–∏

---

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –ë—ã—Å—Ç—Ä–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞:
```bash
# 1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–æ—Ç–∞
sudo systemctl stop report-bot

# 2. –ë—ç–∫–∞–ø
cp bot_data.db bot_data.db.backup

# 3. –†–∞—Å–ø–∞–∫–æ–≤–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
tar -xzf report-bot-updated.tar.gz
cd report-bot-local

# 4. –ú–∏–≥—Ä–∞—Ü–∏—è
python migrate_db.py

# 5. –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞
sudo systemctl start report-bot
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞:
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
journalctl -u report-bot -f

# –ò–ª–∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
sudo systemctl status report-bot
```

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–í –∞—Ä—Ö–∏–≤–µ –≤–∫–ª—é—á–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ —Ñ–∞–π–ª—ã –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:

1. **QUICK_START.md** - –∫—Ä–∞—Ç–∫–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ
2. **UPDATE_INSTRUCTIONS.md** - –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
3. **CHANGELOG_NEW_FEATURES.md** - –ø–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
4. **FILES_CHANGED.md** - —Å–ø–∏—Å–æ–∫ –∏–∑–º–µ–Ω–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç 1: NoText —Å–æ–±—ã—Ç–∏–µ
```bash
# –í –±–æ—Ç–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—å
/add_event_notext 09:00 18:00

# –í —á–∞—Ç–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ –º–µ–∂–¥—É 09:00 –∏ 18:00
# –ò–ª–∏ –Ω–∞–ø–∏—Å–∞—Ç—å "–≤—ã—Ö–æ–¥–Ω–æ–π"

# –í 18:00 –±—É–¥–µ—Ç –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
```

### –¢–µ—Å—Ç 2: Keyword —Å–æ–±—ã—Ç–∏–µ
```bash
# –í –±–æ—Ç–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—å
/add_event_open 09:00 12:00 "–æ—Ç–∫—Ä—ã—Ç"

# –í —á–∞—Ç–µ –Ω–∞–ø–∏—Å–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ —Å "–æ—Ç–∫—Ä—ã—Ç" –º–µ–∂–¥—É 09:00 –∏ 12:00
# –ü–æ–¥–æ–π–¥—É—Ç –≤–∞—Ä–∏–∞–Ω—Ç—ã: –æ—Ç–∫—Ä—ã—Ç, –æ—Ç–∫—Ä—ã—Ç–∞, –æ—Ç–∫—Ä—ã—Ç–æ, –æ—Ç–∫—Ä—ã—Ç–∏–µ

# –í 12:00 –±—É–¥–µ—Ç –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
```

### –¢–µ—Å—Ç 3: –£–¥–∞–ª–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è
```bash
# –í –±–æ—Ç–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—å
/rm_event

# –í—ã–±—Ä–∞—Ç—å –ª—é–±–æ–µ —Å–æ–±—ã—Ç–∏–µ –∏–∑ —Å–ø–∏—Å–∫–∞ (–≤–∫–ª—é—á–∞—è –Ω–æ–≤—ã–µ —Ç–∏–ø—ã)
```

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–°—Ç—Ä–æ–≥–∏–π deadline**: NoText –∏ Keyword —Å–æ–±—ã—Ç–∏—è –ù–ï –∏–º–µ—é—Ç –∑–∞–ø–∞—Å–Ω–æ–≥–æ —Ç–∞–π–º–µ—Ä–∞ –≤ +5 –º–∏–Ω—É—Ç
2. **–û–¥–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –¥–µ–Ω—å**: –î–ª—è NoText –∏ Keyword —Å–æ–±—ã—Ç–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ 1 —Å–æ–æ–±—â–µ–Ω–∏–µ
3. **Regex –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ**: –ö–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –º–∞–∫—Å–∏–º—É–º 5 –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤
4. **–ü—É—Å—Ç—ã–µ —Ä–∞–∑–¥–µ–ª—ã**: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—É—Å—Ç—ã–µ —Ä–∞–∑–¥–µ–ª—ã (—Ç–æ–ª—å–∫–æ "—Å–¥–∞–ª–∏ –≤–æ–≤—Ä–µ–º—è", –µ—Å–ª–∏ –≤—Å–µ —Å–¥–∞–ª–∏)
5. **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: –í—Å–µ —Å—Ç–∞—Ä—ã–µ —Å–æ–±—ã—Ç–∏—è –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π

---

## üõ†Ô∏è –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `journalctl -u report-bot -f`
2. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –±—ç–∫–∞–ø: `cp bot_data.db.backup bot_data.db`
3. –ü–µ—Ä–µ—á–∏—Ç–∞–π—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –≤ `UPDATE_INSTRUCTIONS.md`

---

## ‚ú® –ò—Ç–æ–≥–æ

**–î–æ–±–∞–≤–ª–µ–Ω–æ:**
- 3 –Ω–æ–≤—ã—Ö —Ç–∏–ø–∞ –∫–æ–º–∞–Ω–¥
- 5 –Ω–æ–≤—ã—Ö —Ç–∞–±–ª–∏—Ü –≤ –ë–î
- ~950 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞
- –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
- –í—Ä–µ–º—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ checkout (UTC ‚Üí UTC+3)

**–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:**
- –ü–æ–ª–Ω–æ—Å—Ç—å—é –æ–±—Ä–∞—Ç–Ω–æ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ —Å –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–µ–π
- –í—Å–µ —Å—Ç–∞—Ä—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
