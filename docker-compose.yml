version: '3.8'

services:
  bot:
    build: bot
    container_name: report_bot
    restart: unless-stopped
    env_file:
      - .env
    volumes:
      - ./data:/app/data  # Для SQLite
    depends_on:
      - db
    networks:
      - bot_network
    environment:
      - TZ=Europe/Moscow

  # PostgreSQL (раскомментируйте для продакшена)
#  db:
#    image: postgres:15-alpine
#    container_name: report_bot_db
#    restart: unless-stopped
#    environment:
#      POSTGRES_DB: report_bot
#      POSTGRES_USER: botuser
#      POSTGRES_PASSWORD: changeme_strong_password
#      TZ: Europe/Moscow
#    volumes:
#      - postgres_data:/var/lib/postgresql/data
#    networks:
#      - bot_network
#    ports:
#      - "5432:5432"  # Убрать в продакшене

networks:
  bot_network:
    driver: bridge

#volumes:
#  postgres_data: